(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),l=(t(20),t(14)),o=t(2),i=t(3),m=t.n(i),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},s=function(e){return m.a.post(d,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return m.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){var n=e.filterPerson,t=e.handleFilterName;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},w=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,u=e.newNumber,c=e.handleNewNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null," name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),m=i[0],d=i[1],E=Object(a.useState)(""),v=Object(o.a)(E,2),g=v[0],N=v[1],O=Object(a.useState)(""),j=Object(o.a)(O,2),S=j[0],y=j[1],C=Object(a.useState)(""),k=Object(o.a)(C,2),A=k[0],P=k[1];Object(a.useEffect)((function(){f().then((function(e){u(e)}))}),[]);var F=function(e){var n=t.find((function(n){return n.id===e}));console.log(n),window.confirm("Delete ".concat(n.name,"?"))&&(h(e).then((function(){var n=t.filter((function(n){return n.id!==e}));u(n)})),P("A person called ".concat(n.name," was deleted")),setTimeout((function(){P(null)}),5e3))},T=function(){var e=t.filter((function(e){return e.name.toUpperCase().indexOf(S.toUpperCase())>=0})).map((function(e){return r.a.createElement("li",null,e.name," ",e.number,r.a.createElement("button",{onClick:function(){return F(e.id)}},"delete"))}));return r.a.createElement("ul",null,e)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:30,background:"lightgray",width:"60%"}},A),r.a.createElement(b,{handleFilterName:function(e){y(e.target.value)},filterPerson:S}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(w,{addName:function(e){e.preventDefault();var n={name:m,number:g};if(t.map((function(e){return e.name})).includes(m)){if(window.confirm("".concat(m," is already added in the phonebook, do you want to change the number?"))){var a=t.find((function(e){return e.name===m})),r=Object(l.a)({},a,{number:g});p(a.id,r).then((function(e){u(t.map((function(n){return n.name!==m?n:e}))),d(""),N("")})),P("A person called ".concat(a.name," was updated")),setTimeout((function(){P(null)}),5e3)}}else{t.map((function(e){return e.name})).includes(m)?window.alert("name is already added to phonebook"):""===m||""===g?window.alert("Fill the input"):(s(n).then((function(e){u(t.concat(e)),d(""),N("")})).catch((function(e){e.response?P(e.response.data.error):P("A person called ".concat(n.name," was added"))})),setTimeout((function(){P(null)}),5e3))}},newName:m,handleNameChange:function(e){d(e.target.value)},newNumber:g,handleNewNumber:function(e){N(e.target.value)},deleteName:F}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(T,{persons:t,filterPerson:S}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a6b7823d.chunk.js.map